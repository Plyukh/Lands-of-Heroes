# Game Speed Settings - Инструкция по установке

## Описание
Система настройки скорости игры позволяет изменять скорость передвижения существ и анимаций через UI слайдер с целыми значениями (1x, 2x или 3x).

## Файлы
- `GameSpeedSettings.cs` - Глобальный менеджер настроек скорости (синглтон)
- `GameSpeedSlider.cs` - UI компонент для слайдера
- Обновлен: `CreatureMover.cs` - Теперь применяет множитель к скорости движения
- Обновлен: `CreatureAnimatorController.cs` - Теперь применяет множитель к скорости анимаций

## Установка в Unity

### 1. Создать GameSpeedSettings объект
1. В сцене создайте пустой GameObject: `GameObject > Create Empty`
2. Переименуйте его в `GameSpeedSettings`
3. Добавьте компонент `GameSpeedSettings` (скрипт)
4. Можете установить начальное значение `Speed Multiplier` в инспекторе (по умолчанию 1.0)

### 2. Создать UI Slider для настройки скорости

#### Вариант A: Создание с нуля
1. В иерархии найдите ваш Canvas или создайте новый: `GameObject > UI > Canvas`
2. Создайте Slider: `ПКМ на Canvas > UI > Slider`
3. Переименуйте его в `SpeedSlider`
4. Настройте позицию слайдера (например, в верхнем правом углу)

#### Настройка Slider компонента:
1. Выберите `SpeedSlider` в иерархии
2. Добавьте компонент `GameSpeedSlider` (скрипт)
3. В инспекторе компонента `GameSpeedSlider`:
   - `Speed Slider` - перетащите сюда сам объект `SpeedSlider` (или его компонент Slider)
   - `Speed Text` - (опционально) создайте TextMeshPro и перетащите сюда для отображения текущей скорости
   - `Text Format` - формат текста (по умолчанию "Speed: {0}x")

#### Создание текста для отображения скорости (опционально):
1. ПКМ на `SpeedSlider` > `UI > Text - TextMeshPro`
2. Переименуйте в `SpeedText`
3. Настройте позицию (например, над или под слайдером)
4. Перетащите этот текст в поле `Speed Text` компонента `GameSpeedSlider`

### 3. Визуальная настройка (опционально)

Рекомендуемый внешний вид:
```
┌─────────────────────┐
│  Speed: 1x          │  ← TextMeshPro
│  ●─────○─────○      │  ← Slider (3 позиции: 1x, 2x, 3x)
└─────────────────────┐
```

#### Настройка внешнего вида Slider:
1. `Background` - фон слайдера (можно изменить цвет)
2. `Fill Area > Fill` - заполненная часть (например, синий или зеленый цвет)
3. `Handle Slide Area > Handle` - ручка слайдера (можно изменить размер и цвет)

## Как это работает

### Автоматическое применение
Система автоматически применяется ко всем существам:
1. При старте игры все существа подписываются на изменения скорости
2. При изменении слайдера обновляется `GameSpeedSettings.SpeedMultiplier`
3. Все существа получают событие и обновляют свою скорость

### Что изменяется
- **Скорость передвижения**: `moveSpeed * multiplier`
- **Скорость поворота**: `rotationSpeed * multiplier`
- **Скорость анимаций**: `animator.speed = multiplier`

### Диапазон значений
- **1x** - нормальная скорость
- **2x** - вдвое быстрее
- **3x** - втрое быстрее

## API

### Программное изменение скорости
```csharp
// Установить скорость 2x
GameSpeedSettings.Instance.SpeedMultiplier = 2;

// Сбросить к базовой скорости (1x)
GameSpeedSettings.Instance.ResetSpeed();

// Подписаться на изменения
GameSpeedSettings.Instance.OnSpeedMultiplierChanged += (newSpeed) => {
    Debug.Log($"Скорость изменена на {newSpeed}x");
};
```

### Для существующих существ
Все существа автоматически применяют множитель при:
- Создании (в `Start()`)
- Изменении настроек (через событие `OnSpeedMultiplierChanged`)

## Устранение неполадок

### Скорость не применяется
1. Убедитесь, что в сцене есть `GameSpeedSettings` объект
2. Проверьте, что существа имеют компоненты `CreatureMover` и `CreatureAnimatorController`
3. Проверьте консоль на ошибки

### Слайдер не работает
1. Убедитесь, что у `SpeedSlider` есть компонент `GameSpeedSlider`
2. Проверьте, что поле `Speed Slider` заполнено в инспекторе
3. Проверьте, что `GameSpeedSettings` объект существует в сцене

### Анимации не ускоряются
1. Убедитесь, что у существа есть `Animator` компонент
2. Проверьте, что `animatorController` правильно назначен в `CreatureMover`
3. В консоли не должно быть ошибок о `NullReferenceException`

## Примечания
- Множитель применяется глобально ко всем существам
- Настройка сохраняется только в течение игровой сессии
- Для сохранения между сессиями добавьте интеграцию с системой сохранений

